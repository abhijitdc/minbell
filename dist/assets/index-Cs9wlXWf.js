(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();class w{constructor(t,n){this.duration=t,this.remainingTime=t*60,this.interval=n,this.isRunning=!1,this.tickHandlers=[],this.intervalHandlers=[],this.doneHandlers=[]}start(){this.isRunning||(this.isRunning=!0,this.timerId=setInterval(()=>{this.remainingTime--,this.tickHandlers.forEach(t=>t(this.remainingTime)),this.remainingTime>0&&this.remainingTime%(this.interval*60)===0&&this.intervalHandlers.forEach(t=>t()),this.remainingTime<=0&&(this.stop(),this.doneHandlers.forEach(t=>t()))},1e3))}stop(){this.isRunning&&(this.isRunning=!1,clearInterval(this.timerId))}onTick(t){this.tickHandlers.push(t)}onInterval(t){this.intervalHandlers.push(t)}onDone(t){this.doneHandlers.push(t)}}const m=document.getElementById("duration"),g=document.getElementById("interval"),L=document.getElementById("start"),B=document.getElementById("stop"),v=document.getElementById("time"),d=document.getElementById("intervalProgress"),c=document.getElementById("overallProgress"),u=d.getContext("2d"),h=c.getContext("2d");let s,f;const E=new Audio("/assets/interval-end.wav"),I=new Audio("/assets/final-end.wav");function C(){const e=Math.floor(Math.random()*360),t=Math.floor(Math.random()*31)+40,n=Math.floor(Math.random()*21)+60;return`hsl(${e}, ${t}%, ${n}%)`}function M(){const e=C(),t=C();document.documentElement.style.setProperty("--gradient-start",e),document.documentElement.style.setProperty("--gradient-end",t)}function a(e,t,n,r){const o=t.width/2,i=t.height/2,l=t.width/2-10;e.clearRect(0,0,t.width,t.height),e.beginPath(),e.arc(o,i,l,0,2*Math.PI),e.fillStyle="#eee",e.fill();const p=t.height*n;e.fillStyle=r,e.fillRect(0,t.height-p,t.width,p),e.globalCompositeOperation="destination-in",e.beginPath(),e.arc(o,i,l,0,2*Math.PI),e.fill(),e.globalCompositeOperation="source-over"}function y(){const e=parseInt(m.value);g.innerHTML="";for(let t=1;t<=e;t++)if(e%t===0){const n=document.createElement("option");n.value=t,n.textContent=t,g.appendChild(n)}}m.addEventListener("change",y);L.addEventListener("click",()=>{const e=parseInt(m.value),t=parseInt(g.value);E.load(),I.load(),s&&s.stop(),s=new w(e,t),f=e*60,s.onTick(n=>{const r=Math.floor(n/60).toString().padStart(2,"0"),o=(n%60).toString().padStart(2,"0");v.textContent=`${r}:${o}`;const l=(t*60-n%(t*60))/(t*60);a(u,d,l,"#4CAF50");const P=(f-n)/f;a(h,c,P,"#2196F3")}),s.onInterval(()=>{E.play()}),s.onDone(()=>{v.textContent="Done!",I.play(),a(u,d,1,"#4CAF50"),a(h,c,1,"#2196F3")}),s.start()});const S=document.getElementById("reset");B.addEventListener("click",()=>{s&&(s.stop(),a(u,d,0,"#4CAF50"),a(h,c,0,"#2196F3"))});S.addEventListener("click",()=>{s&&s.stop(),v.textContent="15:00",a(u,d,0,"#4CAF50"),a(h,c,0,"#2196F3"),m.value=15,y()});document.querySelectorAll("button").forEach(e=>{e.addEventListener("click",function(t){const n=document.createElement("span");n.classList.add("ripple");const r=this.getBoundingClientRect(),o=Math.max(r.width,r.height),i=t.clientX-r.left-o/2,l=t.clientY-r.top-o/2;n.style.width=n.style.height=`${o}px`,n.style.left=`${i}px`,n.style.top=`${l}px`,this.appendChild(n),n.addEventListener("animationend",()=>{n.remove()})})});y();M();
